#<? cfg paf policy ?>
# 

BackgroundEstimationStage: {
    inputKeys: {
        exposure0: "calibratedExposure0"
        exposure1: "calibratedExposure1"
    }
    outputKeys: {
        exposure0: "calibratedExposure0"
        exposure1: "calibratedExposure1"
        background: 
    }
    parameters: {
        subtractBackground: true
    }
}

CrRejectStage: {
    inputKeys: {
        exposure0: "calibratedExposure0"
        exposure1: "calibratedExposure1"
    }
    
    outputKeys: {
        exposure0: "calibratedExposure0"
        exposure1: "calibratedExposure1"
    }
    
    parameters: {
        defaultFwhm : 1.0
        keepCRs: true
        #keepCRs: false
    }
}

SimpleDiffImStage: {
    inputKeys: {
        exposures: "calibratedExposure0" "calibratedExposure1"
    }
    outputKeys: {
        differenceExposure: "differenceExposure"
    }
    parameters: {
    }
}

SourceDetectionStage: {
    inputKeys: {
        exposure: "differenceExposure"
        psf: None
    }
    outputKeys: {
        positiveDetection: "positiveFootprintSet"
        negativeDetection: "negativeFootprintSet"
        backgroundSubtractedExposure: "differenceExposure"
    }
    
    backgroundPolicy: {
        # how to interpolate the background values
        algorithm:  "NONE" 
    }

    detectionPolicy: {
        minPixels: 1
        nGrow : 0
        thresholdValue: 10
        thresholdType: "stdev"
        thresholdPolarity: "both"
    }
}

CrSplitCombineStage: {
    inputKeys: {
        exposures: "calibratedExposure0" "calibratedExposure1"
        positiveDetection: "positiveFootprintSet"
        negativeDetection: "negativeFootprintSet"
    }
    outputKeys: {
        differenceExposure: "calibratedExposure"
    }
    parameters: {
    }
}
